<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.68">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta property="og:url" content="https://saynop.github.io/detail/019.html"><meta property="og:title" content="webpack逆向通用流程"><meta property="og:description" content="如有不当可联系本人删除！ 本文以x乎的请求为例，发现加密字段在请求头中。下面分析请求头中的加密字段96 加密函数的定位 复制携带加密参数的请求路径。在 Source 中下XHR断点，然后右键清除缓存并刷新页面 在调用堆栈中回溯，可查看到加密参数生成过程。tT中包含了加密参数。tT是通过函数ed生成的，因此ed为加密函数 (补充：t0，即er函数是取cookie中d_c0的值) 通过函数所在文件的第一行，发现该函数在webpack中 (self.webpackChunkheifetz = self.webpackChunkheifetz || []).push([[2636], { ..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="article:tag" content="JavaScript"><meta property="article:tag" content="Reverse"><meta property="article:published_time" content="2024-09-13T00:00:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"webpack逆向通用流程","image":[""],"datePublished":"2024-09-13T00:00:00.000Z","dateModified":null,"author":[]}</script><link rel="icon" href="/favicon.ico"><title>webpack逆向通用流程</title><meta name="description" content="如有不当可联系本人删除！ 本文以x乎的请求为例，发现加密字段在请求头中。下面分析请求头中的加密字段96 加密函数的定位 复制携带加密参数的请求路径。在 Source 中下XHR断点，然后右键清除缓存并刷新页面 在调用堆栈中回溯，可查看到加密参数生成过程。tT中包含了加密参数。tT是通过函数ed生成的，因此ed为加密函数 (补充：t0，即er函数是取cookie中d_c0的值) 通过函数所在文件的第一行，发现该函数在webpack中 (self.webpackChunkheifetz = self.webpackChunkheifetz || []).push([[2636], { ...">
    <link rel="preload" href="/assets/style-89225919.css" as="style"><link rel="stylesheet" href="/assets/style-89225919.css">
    <link rel="modulepreload" href="/assets/app-c0ee10fd.js"><link rel="modulepreload" href="/assets/019.html-269bba34.js"><link rel="modulepreload" href="/assets/019.html-8bae7be9.js">
    <link rel="prefetch" href="/assets/index.html-f33fda43.js" as="script"><link rel="prefetch" href="/assets/001.html-12451cc3.js" as="script"><link rel="prefetch" href="/assets/002.html-a6d5828c.js" as="script"><link rel="prefetch" href="/assets/003.html-6c773146.js" as="script"><link rel="prefetch" href="/assets/004.html-689926d8.js" as="script"><link rel="prefetch" href="/assets/005.html-3e416991.js" as="script"><link rel="prefetch" href="/assets/006.html-5b50a542.js" as="script"><link rel="prefetch" href="/assets/007.html-d3b6ddc8.js" as="script"><link rel="prefetch" href="/assets/008.html-042c4a7a.js" as="script"><link rel="prefetch" href="/assets/009.html-7d1574d7.js" as="script"><link rel="prefetch" href="/assets/010.html-f1724340.js" as="script"><link rel="prefetch" href="/assets/011.html-2107781d.js" as="script"><link rel="prefetch" href="/assets/012.html-5e7aa08e.js" as="script"><link rel="prefetch" href="/assets/013.html-8dd46ba3.js" as="script"><link rel="prefetch" href="/assets/014.html-d0db391f.js" as="script"><link rel="prefetch" href="/assets/015.html-7a04f43c.js" as="script"><link rel="prefetch" href="/assets/016.html-79bc20a6.js" as="script"><link rel="prefetch" href="/assets/017.html-225b58d3.js" as="script"><link rel="prefetch" href="/assets/018.html-185c4621.js" as="script"><link rel="prefetch" href="/assets/020.html-4be26beb.js" as="script"><link rel="prefetch" href="/assets/021.html-7df03ece.js" as="script"><link rel="prefetch" href="/assets/022.html-9ae39887.js" as="script"><link rel="prefetch" href="/assets/404.html-a0fec2a7.js" as="script"><link rel="prefetch" href="/assets/index.html-75381ff5.js" as="script"><link rel="prefetch" href="/assets/index.html-c95ce669.js" as="script"><link rel="prefetch" href="/assets/index.html-2c56dc8e.js" as="script"><link rel="prefetch" href="/assets/index.html-98874abd.js" as="script"><link rel="prefetch" href="/assets/index.html-b2308fb7.js" as="script"><link rel="prefetch" href="/assets/index.html-10e703b4.js" as="script"><link rel="prefetch" href="/assets/index.html-5f3af54d.js" as="script"><link rel="prefetch" href="/assets/index.html-56349a98.js" as="script"><link rel="prefetch" href="/assets/index.html-a7c2713a.js" as="script"><link rel="prefetch" href="/assets/index.html-2e96c3d2.js" as="script"><link rel="prefetch" href="/assets/index.html-4e233464.js" as="script"><link rel="prefetch" href="/assets/index.html-16b34053.js" as="script"><link rel="prefetch" href="/assets/index.html-3202320f.js" as="script"><link rel="prefetch" href="/assets/index.html-d90f0ec9.js" as="script"><link rel="prefetch" href="/assets/index.html-f3052411.js" as="script"><link rel="prefetch" href="/assets/index.html-c3fe2c85.js" as="script"><link rel="prefetch" href="/assets/index.html-a7568890.js" as="script"><link rel="prefetch" href="/assets/index.html-5485bfc3.js" as="script"><link rel="prefetch" href="/assets/index.html-b9dd3162.js" as="script"><link rel="prefetch" href="/assets/index.html-9d25f5f2.js" as="script"><link rel="prefetch" href="/assets/index.html-d9efd072.js" as="script"><link rel="prefetch" href="/assets/index.html-ff33d682.js" as="script"><link rel="prefetch" href="/assets/index.html-3bce843e.js" as="script"><link rel="prefetch" href="/assets/index.html-09b9da96.js" as="script"><link rel="prefetch" href="/assets/index.html-750acad1.js" as="script"><link rel="prefetch" href="/assets/index.html-1c1e573d.js" as="script"><link rel="prefetch" href="/assets/index.html-8eb4570b.js" as="script"><link rel="prefetch" href="/assets/index.html-7dd1db94.js" as="script"><link rel="prefetch" href="/assets/index.html-32048506.js" as="script"><link rel="prefetch" href="/assets/index.html-42077d35.js" as="script"><link rel="prefetch" href="/assets/index.html-a4e9e805.js" as="script"><link rel="prefetch" href="/assets/index.html-df3e534f.js" as="script"><link rel="prefetch" href="/assets/index.html-cb3cc9f5.js" as="script"><link rel="prefetch" href="/assets/index.html-0994fca8.js" as="script"><link rel="prefetch" href="/assets/index.html-a902e771.js" as="script"><link rel="prefetch" href="/assets/index.html-76fbbff6.js" as="script"><link rel="prefetch" href="/assets/index.html-7bc29919.js" as="script"><link rel="prefetch" href="/assets/index.html-2642a77f.js" as="script"><link rel="prefetch" href="/assets/index.html-8dfad283.js" as="script"><link rel="prefetch" href="/assets/index.html-0e75c0da.js" as="script"><link rel="prefetch" href="/assets/index.html-1d59d05d.js" as="script"><link rel="prefetch" href="/assets/index.html-5789a1c9.js" as="script"><link rel="prefetch" href="/assets/index.html-a74daf45.js" as="script"><link rel="prefetch" href="/assets/index.html-12b75b8f.js" as="script"><link rel="prefetch" href="/assets/index.html-48da3268.js" as="script"><link rel="prefetch" href="/assets/index.html-34afd268.js" as="script"><link rel="prefetch" href="/assets/001.html-9ecb668b.js" as="script"><link rel="prefetch" href="/assets/002.html-28c572ed.js" as="script"><link rel="prefetch" href="/assets/003.html-8829915d.js" as="script"><link rel="prefetch" href="/assets/004.html-176deb71.js" as="script"><link rel="prefetch" href="/assets/005.html-1dd23f27.js" as="script"><link rel="prefetch" href="/assets/006.html-79d7e8a7.js" as="script"><link rel="prefetch" href="/assets/007.html-6dae2dd0.js" as="script"><link rel="prefetch" href="/assets/008.html-1c20a28b.js" as="script"><link rel="prefetch" href="/assets/009.html-5d3f8ff1.js" as="script"><link rel="prefetch" href="/assets/010.html-cc26776f.js" as="script"><link rel="prefetch" href="/assets/011.html-2af46f38.js" as="script"><link rel="prefetch" href="/assets/012.html-35e2f308.js" as="script"><link rel="prefetch" href="/assets/013.html-7cff6fc6.js" as="script"><link rel="prefetch" href="/assets/014.html-edfdb6bf.js" as="script"><link rel="prefetch" href="/assets/015.html-82421f7c.js" as="script"><link rel="prefetch" href="/assets/016.html-3cbb37be.js" as="script"><link rel="prefetch" href="/assets/017.html-3549c509.js" as="script"><link rel="prefetch" href="/assets/018.html-2109a4a3.js" as="script"><link rel="prefetch" href="/assets/020.html-71880368.js" as="script"><link rel="prefetch" href="/assets/021.html-cf4a2828.js" as="script"><link rel="prefetch" href="/assets/022.html-cc19284e.js" as="script"><link rel="prefetch" href="/assets/404.html-2bed6ecd.js" as="script"><link rel="prefetch" href="/assets/index.html-4cb70693.js" as="script"><link rel="prefetch" href="/assets/index.html-65c6ea0c.js" as="script"><link rel="prefetch" href="/assets/index.html-d6e33074.js" as="script"><link rel="prefetch" href="/assets/index.html-c474f4fe.js" as="script"><link rel="prefetch" href="/assets/index.html-adac3634.js" as="script"><link rel="prefetch" href="/assets/index.html-45bf0305.js" as="script"><link rel="prefetch" href="/assets/index.html-468de26f.js" as="script"><link rel="prefetch" href="/assets/index.html-ddd7441e.js" as="script"><link rel="prefetch" href="/assets/index.html-a759022c.js" as="script"><link rel="prefetch" href="/assets/index.html-d37aba7c.js" as="script"><link rel="prefetch" href="/assets/index.html-8d8aa2ca.js" as="script"><link rel="prefetch" href="/assets/index.html-4396b619.js" as="script"><link rel="prefetch" href="/assets/index.html-b2b01461.js" as="script"><link rel="prefetch" href="/assets/index.html-9ca94f55.js" as="script"><link rel="prefetch" href="/assets/index.html-87af8735.js" as="script"><link rel="prefetch" href="/assets/index.html-461520ae.js" as="script"><link rel="prefetch" href="/assets/index.html-2fc10b72.js" as="script"><link rel="prefetch" href="/assets/index.html-eaa851db.js" as="script"><link rel="prefetch" href="/assets/index.html-331345a5.js" as="script"><link rel="prefetch" href="/assets/index.html-37024239.js" as="script"><link rel="prefetch" href="/assets/index.html-d4c4f382.js" as="script"><link rel="prefetch" href="/assets/index.html-67f88e84.js" as="script"><link rel="prefetch" href="/assets/index.html-74656e18.js" as="script"><link rel="prefetch" href="/assets/index.html-dc32c9f6.js" as="script"><link rel="prefetch" href="/assets/index.html-2a3843c1.js" as="script"><link rel="prefetch" href="/assets/index.html-f83226bd.js" as="script"><link rel="prefetch" href="/assets/index.html-b71f9944.js" as="script"><link rel="prefetch" href="/assets/index.html-00450965.js" as="script"><link rel="prefetch" href="/assets/index.html-02b6cc09.js" as="script"><link rel="prefetch" href="/assets/index.html-96004920.js" as="script"><link rel="prefetch" href="/assets/index.html-8fa97351.js" as="script"><link rel="prefetch" href="/assets/index.html-b9fdf957.js" as="script"><link rel="prefetch" href="/assets/index.html-68439150.js" as="script"><link rel="prefetch" href="/assets/index.html-c2158d9a.js" as="script"><link rel="prefetch" href="/assets/index.html-cdd42d8c.js" as="script"><link rel="prefetch" href="/assets/index.html-f184226b.js" as="script"><link rel="prefetch" href="/assets/index.html-1f247d88.js" as="script"><link rel="prefetch" href="/assets/index.html-8b1980ef.js" as="script"><link rel="prefetch" href="/assets/index.html-45fbb26e.js" as="script"><link rel="prefetch" href="/assets/index.html-a01318ec.js" as="script"><link rel="prefetch" href="/assets/index.html-c63a0909.js" as="script"><link rel="prefetch" href="/assets/index.html-6370f715.js" as="script"><link rel="prefetch" href="/assets/index.html-e624b0ff.js" as="script"><link rel="prefetch" href="/assets/index.html-631fd164.js" as="script"><link rel="prefetch" href="/assets/index.html-6d1820f8.js" as="script"><link rel="prefetch" href="/assets/giscus-0b7adcf8.js" as="script"><link rel="prefetch" href="/assets/SearchResult-5ff6e6b9.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div data-v-77edf713><header class="header" style="opacity:0;" data-v-90176301><div class="header_container" data-v-90176301><div data-v-90176301><a class="header_title" href="/" data-v-90176301>Leopold&#39;s Blog</a></div><div class="appearance" data-v-90176301><!--[--><button type="button" class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><!----></button><!--]--><button class="switch" data-v-90176301><span class="icon" style="display:block;" data-v-90176301><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" style="" data-v-90176301><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" style="display:none;" data-v-90176301><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></button><button class="switch mobile_list_btn" type="button" data-v-90176301><span class="btn_top" data-v-90176301></span><span class="btn_middle" data-v-90176301></span><span class="btn_bottom" data-v-90176301></span></button></div></div></header><div class="main"><div class="background" data-v-fee8de4c><svg class="pull_down" viewbox="0 0 1026 1024" xmlns="http://www.w3.org/2000/svg" data-v-fee8de4c data-v-3c8412b0><path d="M857.088 224.256q28.672-28.672 69.12-28.672t69.12 28.672q29.696 28.672 29.696 68.608t-29.696 68.608l-382.976 380.928q-12.288 14.336-30.72 19.968t-38.912 4.608-40.448-8.704-34.304-22.016l-376.832-374.784q-29.696-28.672-29.696-68.608t29.696-68.608q14.336-14.336 32.256-21.504t36.864-7.168 37.376 7.168 32.768 21.504l313.344 309.248z" data-v-3c8412b0></path></svg></div><div style="display:flex;"><div class="sider_keeper" data-v-e01a06ce><div class="folding" data-v-e01a06ce><!-- <div class="folding"> --><div class="sidebar_top card_border" style="min-height:1rem" data-v-e01a06ce><div class="tags_brand" data-v-e01a06ce>本文大纲</div><section class="article_sidebar" data-v-e01a06ce data-v-905b99e1><ul data-v-905b99e1><!--[--><li class="level2" data-v-905b99e1><a class="sidebar-link" href="#加密函数的定位" data-v-905b99e1>加密函数的定位</a><ul class="level3" data-v-905b99e1><!--[--><!--]--></ul></li><li class="level2" data-v-905b99e1><a class="sidebar-link" href="#webpack流程" data-v-905b99e1>webpack流程</a><ul class="level3" data-v-905b99e1><!--[--><li data-v-905b99e1><a class="sidebar-link" href="#明确分发编号" data-v-905b99e1>明确分发编号</a><ul class="level4" data-v-905b99e1><!--[--><!--]--></ul></li><li data-v-905b99e1><a class="sidebar-link" href="#分发器-加载器-定位" data-v-905b99e1>分发器(加载器)定位</a><ul class="level4" data-v-905b99e1><!--[--><!--]--></ul></li><li data-v-905b99e1><a class="sidebar-link" href="#处理加密函数" data-v-905b99e1>处理加密函数</a><ul class="level4" data-v-905b99e1><!--[--><!--]--></ul></li><!--]--></ul></li><li class="level2" data-v-905b99e1><a class="sidebar-link" href="#解密" data-v-905b99e1>解密</a><ul class="level3" data-v-905b99e1><!--[--><!--]--></ul></li><!--]--></ul></section></div><div class="sidebar_bottom card_border" data-v-e01a06ce><div class="avatar" style="background-image:url(/assets/imgs/avatar.jpg);" data-v-e01a06ce></div><div class="author" data-v-e01a06ce>Leopold</div><div class="summary" data-v-e01a06ce><div data-v-e01a06ce><p data-v-e01a06ce>文章</p></div><div data-v-e01a06ce><p data-v-e01a06ce>分类</p></div><div data-v-e01a06ce><p data-v-e01a06ce>标签</p></div><div data-v-e01a06ce><p data-v-e01a06ce>22</p></div><div data-v-e01a06ce><p data-v-e01a06ce>10</p></div><div data-v-e01a06ce><p data-v-e01a06ce>33</p></div></div><div class="connection" data-v-e01a06ce><div class="grid_icon" data-v-e01a06ce><svg viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon" data-v-e01a06ce><path d="M1023.560892 524.587752c0 114.331752-32.549236 217.148443-97.647709 308.450075-65.047295 91.301632-149.132822 154.455339-252.205404 189.512299-11.975662 2.303012-20.778286 0.716493-26.305515-4.759558a27.584966 27.584966 0 0 1-8.342021-20.471218V853.150798c0-44.166653-11.566238-76.511177-34.647536-96.982394a446.272549 446.272549 0 0 0 68.32269-12.282731c20.16415-5.476051 41.044792-14.329852 62.590748-26.612583a187.311643 187.311643 0 0 0 53.992837-45.446104c14.432209-18.014672 26.203159-41.914819 35.312851-71.751618 9.109692-29.8368 13.664538-64.074912 13.664538-102.765514 0-55.118754-17.554069-102.049021-52.61103-140.739623 16.376974-41.454216 14.636921-87.872703-5.373695-139.357815-12.436265-4.094244-30.399759-1.535341-53.941659 7.523172a355.17563 355.17563 0 0 0-61.311297 30.041513l-25.333132 16.376974a462.137743 462.137743 0 0 0-127.945112-17.707604 462.137743 462.137743 0 0 0-127.945111 17.758782 589.571074 589.571074 0 0 0-28.301459-18.424096c-11.77095-7.31846-30.34858-16.069906-55.681713-26.305515-25.281954-10.235609-44.422543-13.306292-57.31941-9.212048-19.498835 51.433935-21.085354 97.852421-4.606024 139.306637-35.108139 38.690602-52.713386 85.620869-52.713386 140.739623 0 38.690602 4.606024 72.826357 13.715716 102.458445 9.109692 29.58091 20.778286 53.481057 34.954605 71.700441a180.658498 180.658498 0 0 0 53.634591 45.753172c21.545957 12.282731 42.477777 21.18771 62.641926 26.612583 20.215328 5.527229 42.989557 9.621472 68.32269 12.333909-17.758781 16.376974-28.659705 39.867697-32.651593 70.369811a129.941055 129.941055 0 0 1-29.990334 10.235609 184.087426 184.087426 0 0 1-37.974109 3.428929c-14.688099 0-29.171485-4.913092-43.654872-14.688099-14.432209-9.826185-26.766117-24.053681-37.001726-42.682489a109.162769 109.162769 0 0 0-32.293346-35.517563c-13.101579-9.109692-24.104859-14.585743-33.009839-16.376974l-13.306292-2.047122c-9.314404 0-15.762838 1.023561-19.345301 3.070683-3.582463 2.047122-4.606024 4.606024-3.326572 7.83024a37.769397 37.769397 0 0 0 5.987831 9.570295 49.182101 49.182101 0 0 0 8.700267 8.188487l4.606024 3.377751c9.826185 4.606024 19.447657 13.255114 29.017952 25.998447 9.570294 12.743333 16.581686 24.360749 20.982998 34.80107l6.653146 15.71166c5.783119 17.298179 15.558126 31.320963 29.376197 42.017174 13.766894 10.747389 28.659705 17.554069 44.627255 20.471218 15.96755 2.968327 31.423319 4.606024 46.316131 4.810736 14.841633 0.204712 27.22672-0.562958 37.001726-2.405368l15.302235-2.712436c0 17.298179 0.102356 37.564685 0.358247 60.799517l0.307068 36.848192c0 8.188487-2.86597 15.046345-8.700268 20.471218-5.731941 5.527229-14.636921 7.113748-26.612583 4.810736-103.072582-35.056961-187.158109-98.261846-252.205404-189.512299C32.549236 741.736195 0 638.919504 0 524.587752c0-95.191163 22.876586-182.910331 68.629758-263.31104a516.028224 516.028224 0 0 1 186.288082-190.894106A491.309228 491.309228 0 0 1 511.780446 0.012795a491.309228 491.309228 0 0 1 256.913784 70.369811 516.028224 516.028224 0 0 1 186.236905 190.894106C1000.684306 341.626242 1023.560892 429.447767 1023.560892 524.587752z"></path></svg></div><div data-v-e01a06ce><span data-v-e01a06ce>github.com/SayNop</span></div><div class="grid_icon" data-v-e01a06ce><svg viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon" data-v-e01a06ce><path d="M512 1024C229.222 1024 0 794.778 0 512S229.222 0 512 0s512 229.222 512 512-229.222 512-512 512z m259.149-568.883h-290.74a25.293 25.293 0 0 0-25.292 25.293l-0.026 63.206c0 13.952 11.315 25.293 25.267 25.293h177.024c13.978 0 25.293 11.315 25.293 25.267v12.646a75.853 75.853 0 0 1-75.853 75.853h-240.23a25.293 25.293 0 0 1-25.267-25.293V417.203a75.853 75.853 0 0 1 75.827-75.853h353.946a25.293 25.293 0 0 0 25.267-25.292l0.077-63.207a25.293 25.293 0 0 0-25.268-25.293H417.152a189.62 189.62 0 0 0-189.62 189.645V771.15c0 13.977 11.316 25.293 25.294 25.293h372.94a170.65 170.65 0 0 0 170.65-170.65V480.384a25.293 25.293 0 0 0-25.293-25.267z"></path></svg></div><div data-v-e01a06ce><span data-v-e01a06ce>gitee.com/WhenTimeGoesBy</span></div><!-- <div class="grid_icon"><mail_icon class="icon" /></div><div><span @click="open_link(themeData.connection_link.mail)">{{ themeData.connection_link.mail }}</span></div> --><div class="grid_icon" data-v-e01a06ce><svg viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon" data-v-e01a06ce><path d="M874.666667 181.333333H149.333333c-40.533333 0-74.666667 34.133333-74.666666 74.666667v512c0 40.533333 34.133333 74.666667 74.666666 74.666667h725.333334c40.533333 0 74.666667-34.133333 74.666666-74.666667V256c0-40.533333-34.133333-74.666667-74.666666-74.666667z m-725.333334 64h725.333334c6.4 0 10.666667 4.266667 10.666666 10.666667v25.6L512 516.266667l-373.333333-234.666667V256c0-6.4 4.266667-10.666667 10.666666-10.666667z m725.333334 533.333334H149.333333c-6.4 0-10.666667-4.266667-10.666666-10.666667V356.266667l356.266666 224c4.266667 4.266667 10.666667 4.266667 17.066667 4.266666s12.8-2.133333 17.066667-4.266666l356.266666-224V768c0 6.4-4.266667 10.666667-10.666666 10.666667z"></path></svg></div><div data-v-e01a06ce><a href="mailto:fur999immer@gmail.com" data-v-e01a06ce>fur999immer@gmail.com</a></div></div></div></div></div><div class="content_container"><!--[--><div class="card_border article_container" data-v-77edf713><div class="frontmatter_info" data-v-77edf713><h1 data-v-77edf713>webpack逆向通用流程</h1><div data-v-77edf713>2024-09-13</div><div class="card_tag frontmatter_tags" data-v-77edf713><span class="icon" data-v-77edf713><svg viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" data-v-77edf713><path d="M896 682.666667a42.666667 42.666667 0 0 0-42.666667-42.666667h-85.333333v-85.333333a85.333333 85.333333 0 0 0-85.333333-85.333334h-128V384h85.333333a42.666667 42.666667 0 0 0 42.666667-42.666667V170.666667a42.666667 42.666667 0 0 0-42.666667-42.666667H384a42.666667 42.666667 0 0 0-42.666667 42.666667v170.666666a42.666667 42.666667 0 0 0 42.666667 42.666667h85.333333v85.333333H341.333333a85.333333 85.333333 0 0 0-85.333333 85.333334v85.333333H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666667v170.666666a42.666667 42.666667 0 0 0 42.666667 42.666667h256a42.666667 42.666667 0 0 0 42.666666-42.666667v-170.666666a42.666667 42.666667 0 0 0-42.666666-42.666667H341.333333v-85.333333h341.333334v85.333333h-85.333334a42.666667 42.666667 0 0 0-42.666666 42.666667v170.666666a42.666667 42.666667 0 0 0 42.666666 42.666667h256a42.666667 42.666667 0 0 0 42.666667-42.666667z"></path></svg></span><!--[--><!-- 使用冒泡stop，阻止父组件的跳转覆盖子组件 --><span class="article_category" data-v-77edf713 data-v-c2920afd>JavaScript</span><!--]--><span class="icon" style="margin-right:5px;" data-v-77edf713><svg viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" data-v-77edf713><path d="M985.6 473.6 985.6 473.6l-256 256-256 256 0 0C454.4 1011.2 422.4 1024 384 1024c-38.4 0-70.4-12.8-89.6-38.4l0 0-256-256 0 0C12.8 710.4 0 678.4 0 640c0-38.4 12.8-70.4 38.4-89.6l0 0 256-256 256-256 0 0C569.6 12.8 601.6 0 640 0l256 0c70.4 0 128 57.6 128 128l0 256C1024 422.4 1011.2 454.4 985.6 473.6zM768 128c-70.4 0-128 57.6-128 128 0 70.4 57.6 128 128 128 70.4 0 128-57.6 128-128C896 185.6 838.4 128 768 128z"></path></svg></span><!--[--><!--[--><!-- 使用冒泡stop，阻止父组件的跳转覆盖子组件 --><span class="article_tag" data-v-77edf713 data-v-15d5095d>JavaScript</span><!--]--><!--[--><!-- 使用冒泡stop，阻止父组件的跳转覆盖子组件 --><span class="article_tag" data-v-77edf713 data-v-15d5095d>Reverse</span><!--]--><!--]--></div></div><div data-v-77edf713><p><strong>如有不当可联系本人删除！</strong></p><p>本文以x乎的请求为例，发现加密字段在请求头中。下面分析请求头中的加密字段96</p><img src="/assets/imgs/019/01.png" style="zoom:60%;"><h2 id="加密函数的定位" tabindex="-1"><a class="header-anchor" href="#加密函数的定位" aria-hidden="true">#</a> 加密函数的定位</h2><ul><li><p>复制携带加密参数的请求路径。在 <em>Source</em> 中下XHR断点，然后右键清除缓存并刷新页面</p></li><li><p>在调用堆栈中回溯，可查看到加密参数生成过程。<code>tT</code>中包含了加密参数。<code>tT</code>是通过函数<code>ed</code>生成的，因此<code>ed</code>为加密函数 (补充：t0，即<code>er</code>函数是取cookie中<code>d_c0</code>的值)</p><img src="/assets/imgs/019/02.png" style="zoom:60%;"></li><li><p>通过函数所在文件的第一行，发现该函数在webpack中</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">(</span>self<span class="token punctuation">.</span>webpackChunkheifetz <span class="token operator">=</span> self<span class="token punctuation">.</span>webpackChunkheifetz <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2636</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="webpack流程" tabindex="-1"><a class="header-anchor" href="#webpack流程" aria-hidden="true">#</a> webpack流程</h2><p>以下内容为webpack内函数的快速调用办法。如果涉及到复杂的环境检测，需要补环境或者依旧使用扣逻辑的方式去解密目标函数</p><h3 id="明确分发编号" tabindex="-1"><a class="header-anchor" href="#明确分发编号" aria-hidden="true">#</a> 明确分发编号</h3><ul><li>该js文件为webpack，所在编号为 <code>61763</code> 。编号可能是字符串或者此处的整数</li><li>若是非webpack文件，调用了webpack文件内的函数，需要手动明确编号</li><li>webpack文件特征，搜索<code>||[]).push([</code>，类似 <code>(window.webpackJsonp = window.webpackJsonp || []).push([</code>。如本js中的 <code>(self.webpackChunkheifetz = self.webpackChunkheifetz || []).push([[2636], {</code></li></ul><p>Tips: <code>push</code>含义简介 把一个“模块描述对象”压入队列</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">(</span>window<span class="token punctuation">.</span>webpackJsonp <span class="token operator">=</span> window<span class="token punctuation">.</span>webpackJsonp <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span>chunkIds<span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token comment">// ① chunk id 列表</span>
  <span class="token punctuation">{</span> modules <span class="token punctuation">}</span><span class="token punctuation">,</span>       <span class="token comment">// ② 模块定义对象</span>
  <span class="token punctuation">[</span>runtimeModules<span class="token punctuation">]</span>   <span class="token comment">// ③ 可选：运行时模块</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="分发器-加载器-定位" tabindex="-1"><a class="header-anchor" href="#分发器-加载器-定位" aria-hidden="true">#</a> 分发器(加载器)定位</h3><ul><li><p>特征，通常在 <em>runtime*.js</em> 内，多用一元运算符引导的自执行函数写法</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// `!`引导的自执行函数 参数数量不一定</span>
    <span class="token operator">...</span>
    <span class="token comment">// 明文函数名一般为 __webpack_require__</span>
    <span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token comment">// 明文一般为 cached.exports</span>
            <span class="token keyword">return</span> f<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">.</span>exports<span class="token punctuation">;</span> <span class="token comment">// 特征，返回 exports  </span>
        <span class="token comment">// 明文一般为 module = __webpack_module_cache__[moduleId]</span>
        <span class="token keyword">var</span> d <span class="token operator">=</span> f<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token comment">// 特征对象</span>
            <span class="token literal-property property">i</span><span class="token operator">:</span> a<span class="token punctuation">,</span>  <span class="token comment">// 字段1为索引</span>
            <span class="token literal-property property">l</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>  <span class="token comment">// 字段2为!1</span>
            <span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 字段3为exports</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// 特征，返回*.call(*.exports, *, *.exports, 函数本身)  </span>
        <span class="token comment">// 明文一般为 __webpack_modules__[moduleId](module, module.exports, __webpack_require__);</span>
        <span class="token keyword">return</span> e<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> d<span class="token punctuation">,</span> d<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">,</span>  
        d<span class="token punctuation">.</span>l <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>
        d<span class="token punctuation">.</span>exports
    <span class="token punctuation">}</span> <span class="token comment">// 此时函数c为加载器</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>定位方法</p><ul><li><p>方法一：在目标函数加断点，例如本例中的<code>ed</code>函数。右键刷新后单步调试。发现执行到 <em>runtime.app.*.js</em> 。代码有分发器特征，确定了分发器位置</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> e<span class="token punctuation">,</span> a<span class="token punctuation">,</span> c<span class="token punctuation">,</span> f<span class="token punctuation">,</span> d<span class="token punctuation">,</span> b<span class="token punctuation">,</span> t<span class="token punctuation">,</span> r<span class="token punctuation">,</span> o<span class="token punctuation">,</span> n<span class="token punctuation">,</span> i<span class="token punctuation">,</span> s<span class="token punctuation">,</span> l<span class="token punctuation">,</span> u <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> m <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> a <span class="token operator">=</span> m<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> a<span class="token punctuation">)</span>
            <span class="token keyword">return</span> a<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
        <span class="token keyword">var</span> c <span class="token operator">=</span> m<span class="token punctuation">[</span>e<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span> e<span class="token punctuation">,</span>
            <span class="token literal-property property">loaded</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> u<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> c<span class="token punctuation">,</span> c<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">,</span>
        c<span class="token punctuation">.</span>loaded <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>
        c<span class="token punctuation">.</span>exports
    <span class="token punctuation">}</span>
    p<span class="token punctuation">.</span>m <span class="token operator">=</span> u<span class="token punctuation">,</span>
    p<span class="token punctuation">.</span>c <span class="token operator">=</span> m<span class="token punctuation">,</span>
    p<span class="token punctuation">.</span><span class="token function-variable function">amdD</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&quot;define cannot be used indirect&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">,</span>
    <span class="token operator">...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>方法二：找到目标函数所在编号函数的声明处，在首行添加断点。由于三个参数固定为<code>__unused_webpack_module, exports, __webpack_require__</code> ，第三个参数为该编号函数内代码的依赖，由分发器生成，因此第三个参数的位置就是分发器所在位置</p><img src="/assets/imgs/019/03.png" style="zoom:50%;"></li></ul></li></ul><h3 id="处理加密函数" tabindex="-1"><a class="header-anchor" href="#处理加密函数" aria-hidden="true">#</a> 处理加密函数</h3><ul><li><p>方法1: 将分发器与目标函数全局化。使js文件可以webpack内目标函数的依赖构建与调用</p><ul><li><p>分发器全局化。方便初始化目标函数所需的依赖</p><ul><li><p>将分发器的整个自执行函数代码扣出来，在分发器内的函数前，添加 <code>window.wp_require=分发器函数名</code> 使分发器可被外部调用（取消代码格式化防止内部含有格式化检测）</p><img src="/assets/imgs/019/04.png" style="zoom:60%;"></li><li><p>如果上述方法失败可以模仿编号函数，使用webpack执行全局化代码。查看编号函数处的webpack代码，类似 <code>(window.webpackJsonp = window.webpackJsonp || []).push([</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">(</span>self<span class="token punctuation">.</span>webpackChunkheifetz <span class="token operator">=</span> self<span class="token punctuation">.</span>webpackChunkheifetz <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2636</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token number">54616</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tt<span class="token punctuation">,</span> te<span class="token punctuation">,</span> tr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
        tr<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>te<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">Z</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> ec
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">...</span>
        <span class="token operator">...</span>  <span class="token comment">// 该编号中的剩余完整代码 - 可移除部分代码，减少补环境的内容</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在分发器自执行函数结束后也使用该方式执行我们需要执行的代码，即分发器全局化代码（取消代码格式化防止内部含有格式化检测）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">(</span>self<span class="token punctuation">.</span>webpackChunkheifetz <span class="token operator">=</span> self<span class="token punctuation">.</span>webpackChunkheifetz <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>  <span class="token comment">// push 语句写法参考项目内的 webpack 代码</span>
    <span class="token punctuation">[</span><span class="token number">123456789</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// 随意传一个整形数组</span>
    <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// 不自定义编号函数，传空</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 此处使用匿名函数，webpack会将分发器函数传入</span>
        window<span class="token punctuation">.</span>wp_require<span class="token operator">=</span>e  <span class="token comment">// 分发器全局化代码</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 使用 webpack 将分发器全局化的原理</span>
<span class="token comment">// webpackJsonpCallback 内部逻辑</span>
<span class="token comment">/*
function webpackJsonpCallback(data) {
    var chunkIds = data[0];
    var moreModules = data[1];
    var runtime = data[2];

    // ① 注册新模块
    for(var moduleId in moreModules) {
        __webpack_modules__[moduleId] = moreModules[moduleId];
    }

    // ② 标记 chunk 已加载
    for(var i=0; i&lt;chunkIds.length; i++) {
        installedChunks[chunkIds[i]] = 0;
    }

    // ③ 如果有 runtime 函数，就立即执行，并把 __webpack_require__ 传进去
    if(runtime) {
        runtime(__webpack_require__);
    }
}
*/</span>
<span class="token comment">// 由于第三步默认会将分发器传入，此时通过我们编写匿名函数将分发器挂载到 window ，实现分发器全局化</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div> <img src="/assets/imgs/019/05.png" style="zoom:50%;"></li></ul></li><li><p>目标函数全局化。使我们可直接在最外层调用目标函数。在目标函数定义完成后，新增行 <code>window.target_fn=&lt;目标函数名&gt;;</code> 使其全局化</p></li><li><p>调用目标函数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 构建目标函数的依赖 加载目标函数</span>
<span class="token function">wp_require</span><span class="token punctuation">(</span><span class="token number">61763</span><span class="token punctuation">)</span>  <span class="token comment">// 将目标函数所在的编号传入分发器，即第一步的明确编号</span>
<span class="token function">target_fn</span><span class="token punctuation">(</span>xxx<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span>  <span class="token comment">// 传入对应参数调用目标函数</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>方法2: 目标编号块与分发器组合</p><ul><li><p>确认分发器的参数。查看分发器所在的自执行函数是否包含参数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 自执行没有传入参数</span>
<span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 自执行函数有1个参数</span>
<span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">,</span> pls</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 自执行函数有2个参数</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>将分发器代码扣出后，将目标代码段作为分发器自执行函数的参数传入或内部赋值进去。注意分发器的返回值，调用call的对象就是需要构造成 <code>{编号: 代码块}</code> 的对象</p><ul><li>没有参数的情况（通用方法，不论是否有参数）<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> e<span class="token punctuation">,</span> a<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> f<span class="token punctuation">,</span> b<span class="token punctuation">,</span> t<span class="token punctuation">,</span> r<span class="token punctuation">,</span> o<span class="token punctuation">,</span> n<span class="token punctuation">,</span> i<span class="token punctuation">,</span> s<span class="token punctuation">,</span> l<span class="token punctuation">,</span> u <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> m <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.通过分发器的返回值明确需要构造的变量</span>
    u <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token number">61763</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tt<span class="token punctuation">,</span> te<span class="token punctuation">,</span> tr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
            tr<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>te<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token function-variable function">DH</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> tq
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token operator">...</span>  <span class="token comment">// 该编号中的剩余完整代码</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> a <span class="token operator">=</span> m<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">!==</span> a<span class="token punctuation">)</span>
            <span class="token keyword">return</span> a<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
        <span class="token keyword">var</span> c <span class="token operator">=</span> m<span class="token punctuation">[</span>e<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span> e<span class="token punctuation">,</span>
            <span class="token literal-property property">loaded</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> u<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> c<span class="token punctuation">,</span> c<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// 1.u为需要构造的对象</span>
        c<span class="token punctuation">.</span>loaded <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>
        c<span class="token punctuation">.</span>exports
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>  <span class="token comment">// 分发器自执行函数剩余代码</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>一个参数<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
    <span class="token operator">...</span>
    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>h<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> h<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
        <span class="token keyword">var</span> u <span class="token operator">=</span> h<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">i</span><span class="token operator">:</span> n<span class="token punctuation">,</span>
            <span class="token literal-property property">l</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// 1.c为需要构造的对象，且c是自执行函数的参数</span>
        <span class="token keyword">return</span> c<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> u<span class="token punctuation">,</span> u<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">,</span>
        u<span class="token punctuation">.</span>l <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>
        u<span class="token punctuation">.</span>exports
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span>  <span class="token comment">// 此行之前是分发器的全部原始代码。</span>
    <span class="token comment">// 2.将编码和代码块构造成对象 传入</span>
    <span class="token punctuation">{</span>
        <span class="token number">61763</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tt<span class="token punctuation">,</span> te<span class="token punctuation">,</span> tr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
            tr<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>te<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token function-variable function">DH</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> tq
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token operator">...</span>  <span class="token comment">// 该编号中的剩余完整代码</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>两个参数<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">,</span> p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>  <span class="token comment">// 分发器自执行函数的剩余完整代码</span>
    <span class="token keyword">function</span> <span class="token function">t</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> n<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
        <span class="token keyword">var</span> d <span class="token operator">=</span> n<span class="token punctuation">[</span>e<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">i</span><span class="token operator">:</span> e<span class="token punctuation">,</span>
            <span class="token literal-property property">l</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> o<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> d<span class="token punctuation">,</span> d<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">,</span>
        d<span class="token punctuation">.</span>l <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>
        d<span class="token punctuation">.</span>exports
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>  <span class="token comment">// 分发器自执行函数的剩余完整代码</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token number">61763</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tt<span class="token punctuation">,</span> te<span class="token punctuation">,</span> tr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
        tr<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>te<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">DH</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> tq
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token operator">...</span>  <span class="token comment">// 该编号中的剩余完整代码</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>将分发器全局化并将加密函数的参数与返回值绑定到window中，同时将自执行函数套一个函数壳改为普通的调用执行函数，并返回绑定在window中的结果。这样我们在调用时在window中绑定传入参数，加密函数才正常读取到我们传入的参数，并返回我们需要的结果</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>
<span class="token keyword">var</span> llll<span class="token punctuation">;</span>  <span class="token comment">// 分发器全局化变量</span>

<span class="token comment">// 可直接在外边套一个函数保证其不会自执行。函数返回结果</span>
<span class="token keyword">function</span> <span class="token function">ppp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
        <span class="token operator">...</span>  <span class="token comment">// 分发器自执行函数的剩余完整代码</span>
        <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>h<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> h<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
            <span class="token keyword">var</span> u <span class="token operator">=</span> h<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">i</span><span class="token operator">:</span> n<span class="token punctuation">,</span>
                <span class="token literal-property property">l</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token literal-property property">exports</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> c<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> u<span class="token punctuation">,</span> u<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">,</span>
            u<span class="token punctuation">.</span>l <span class="token operator">=</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">,</span>
            u<span class="token punctuation">.</span>exports
        <span class="token punctuation">}</span>
        <span class="token operator">...</span>  <span class="token comment">// 分发器自执行函数的剩余完整代码</span>

        llll <span class="token operator">=</span> f<span class="token punctuation">;</span>  <span class="token comment">// 将分发器全局化</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span> 
        <span class="token punctuation">{</span>
            <span class="token number">61763</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">tt<span class="token punctuation">,</span> te<span class="token punctuation">,</span> tr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
                <span class="token operator">...</span>  <span class="token comment">// 该编号中的剩余完成代码</span>
                <span class="token keyword">function</span> <span class="token function">ed</span><span class="token punctuation">(</span><span class="token parameter">tt<span class="token punctuation">,</span> te<span class="token punctuation">,</span> tr<span class="token punctuation">,</span> ti</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 目标函数</span>

                    <span class="token comment">// 传入参数改从window中获取                          </span>
                    tt <span class="token operator">=</span> window<span class="token punctuation">.</span>tt
                    te <span class="token operator">=</span> window<span class="token punctuation">.</span>te
                    tr <span class="token operator">=</span> window<span class="token punctuation">.</span>tr
                    ti <span class="token operator">=</span> window<span class="token punctuation">.</span>ti

                    <span class="token keyword">var</span> ta <span class="token operator">=</span> tr<span class="token punctuation">.</span>zse93
                    <span class="token punctuation">,</span> tu <span class="token operator">=</span> tr<span class="token punctuation">.</span>dc0
                    <span class="token punctuation">,</span> tc <span class="token operator">=</span> tr<span class="token punctuation">.</span>xZst81
                    <span class="token punctuation">,</span> tf <span class="token operator">=</span> <span class="token function">t3</span><span class="token punctuation">(</span>tt<span class="token punctuation">)</span>
                    <span class="token punctuation">,</span> td <span class="token operator">=</span> <span class="token function">t6</span><span class="token punctuation">(</span>te<span class="token punctuation">)</span>
                    <span class="token punctuation">,</span> tp <span class="token operator">=</span> <span class="token punctuation">[</span>ta<span class="token punctuation">,</span> tf<span class="token punctuation">,</span> tu<span class="token punctuation">,</span> <span class="token function">t8</span><span class="token punctuation">(</span>td<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> td<span class="token punctuation">,</span> tc<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token comment">// 运行结果全局化</span>
                    result <span class="token operator">=</span> <span class="token punctuation">{</span>
                        <span class="token literal-property property">source</span><span class="token operator">:</span> tp<span class="token punctuation">,</span>
                        <span class="token literal-property property">signature</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>
                        <span class="token function">tJ</span><span class="token punctuation">(</span>ti<span class="token punctuation">)</span><span class="token punctuation">.</span>encrypt<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">ty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>tp<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span>
                    window<span class="token punctuation">.</span>result <span class="token operator">=</span> result<span class="token punctuation">;</span>

                    <span class="token keyword">return</span> result
                <span class="token punctuation">}</span>
                <span class="token operator">...</span>  <span class="token comment">// 该编号中的剩余完成代码</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    llll<span class="token punctuation">[</span><span class="token number">61763</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 加载依赖</span>
    <span class="token keyword">return</span> window<span class="token punctuation">.</span>result  <span class="token comment">// 返回绑定在window上的结果</span>
<span class="token punctuation">}</span>

<span class="token comment">// Tips: 如果该目标函数依赖其他编号内的代码，在参数对象中对应添加，并在后方加载对应编号</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>生成目标结果</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>tt <span class="token operator">=</span> <span class="token number">1</span>
window<span class="token punctuation">.</span>te <span class="token operator">=</span> <span class="token number">2</span>
window<span class="token punctuation">.</span>tr <span class="token operator">=</span> <span class="token number">3</span>
window<span class="token punctuation">.</span>ti <span class="token operator">=</span> <span class="token number">4</span>
res <span class="token operator">=</span> <span class="token function">ppp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 调用套壳函数，内部会自执行分发器，加载依赖，并返回结果</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>方法3：加密函数的依赖通过webpack加载</p><ul><li>将加密函数扣出<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sign</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    o<span class="token punctuation">.</span><span class="token function">doSign</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span>  <span class="token comment">// o对象是编号代码段中的全局对象，查看该对象所在编号，此处以 &#39;XXX&#39; 为例</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>通过webpack分发器加载加密函数依赖的对象，将加密依赖对象全局化。需放在加密函数前<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> sign_require_o<span class="token punctuation">;</span>
<span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>  <span class="token comment">// 分发器源码</span>
    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 分发器函数</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>  <span class="token comment">// 分发器源码</span>

    sign_require_o <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">&#39;XXX&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// 加载指定编号，用于加载加密函数的依赖对象</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span><span class="token string-property property">&#39;XXX&#39;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>  <span class="token comment">// 依赖对象所在编号代码块，删减部分未引用的内容</span>
<span class="token punctuation">)</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>依赖对象可能依赖其他代码块中的对象，或加密函数可能依赖多个对象，通过webpack方式加载<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> sign_require_o<span class="token punctuation">;</span>
<span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>  <span class="token comment">// 分发器源码</span>
    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 分发器函数</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>  <span class="token comment">// 分发器源码</span>

    sign_require_o <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">&#39;XXX&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// 加载指定编号，用于加载加密函数的依赖对象</span>
    o_require_p <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">&#39;YYY&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// 3. 加载指定编号，用于加载加密函数的依赖对象</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span><span class="token string-property property">&#39;XXX&#39;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
        <span class="token operator">...</span>
        o<span class="token punctuation">.</span>foo <span class="token operator">=</span> p<span class="token punctuation">.</span>bar  <span class="token comment">// 1. o 依赖 p，p在编号 YYY 中声明</span>
        <span class="token operator">...</span>    
    <span class="token punctuation">}</span><span class="token punctuation">}</span>  <span class="token comment">// 依赖对象所在编号代码块，删减部分未引用的内容</span>
    <span class="token punctuation">{</span><span class="token string-property property">&#39;YYY&#39;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>t<span class="token punctuation">,</span>r</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>  <span class="token comment">// 2. 依赖对象所在编号代码块，删减部分未引用的内容</span>
<span class="token punctuation">)</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>加载后修改依赖对象的标识符名称<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sign</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    sign_require_o<span class="token punctuation">.</span><span class="token function">doSign</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span>  <span class="token comment">// 加密函数中的依赖对象改为全局化的对象</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h2 id="解密" tabindex="-1"><a class="header-anchor" href="#解密" aria-hidden="true">#</a> 解密</h2><ul><li>一般会进行环境检测，需要补环境， 推荐使用 <a href="https://github.com/cilame/v_jstools" target="_blank" rel="noopener noreferrer">v_jstools<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>使用webpack的流程将目标函数扣出</li></ul><p> </p><p><strong>补充说明：</strong> 如果传入参数固定，每次生成内容不一致的，可能是加密过程中使用了随机数或者时间戳。可在重载对应方法（在加密函数调用前重载即可），看看生成内容是否不变。明确后在浏览器console中，也重载对应方法后调用，查看生成结果是否与解密一致</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>Math<span class="token punctuation">,</span><span class="token function-variable function">random</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token number">0.5</span><span class="token punctuation">}</span>  <span class="token comment">// 重载随机数方法</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><div id="comment" class="giscus-wrapper input-top" style="display:block;" data-v-77edf713><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div></div><!--]--><footer class="page_footer" data-v-2c01bf66><div class="footer_middle card_border" data-v-2c01bf66><!--[--><span data-v-2c01bf66>Released under the MIT License. <br data-v-2c01bf66></span><span data-v-2c01bf66>Copyright © 2023-present Leopold <br data-v-2c01bf66></span><!--]--></div></footer></div></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-c0ee10fd.js" defer></script>
  </body>
</html>
