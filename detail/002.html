<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GIT配置同设备多账号管理与SSH配置 | Leopold&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="Blog powerd by vuepress">
    
    <link rel="preload" href="/assets/css/0.styles.d6673cae.css" as="style"><link rel="preload" href="/assets/js/app.dce54de5.js" as="script"><link rel="preload" href="/assets/js/3.640944bc.js" as="script"><link rel="preload" href="/assets/js/6.80f121fe.js" as="script"><link rel="prefetch" href="/assets/js/10.8437fd11.js"><link rel="prefetch" href="/assets/js/11.ee93ec51.js"><link rel="prefetch" href="/assets/js/12.43b6aae2.js"><link rel="prefetch" href="/assets/js/4.a63a37c2.js"><link rel="prefetch" href="/assets/js/5.9d7f9154.js"><link rel="prefetch" href="/assets/js/7.8f5d0dd7.js"><link rel="prefetch" href="/assets/js/8.1f037ba6.js"><link rel="prefetch" href="/assets/js/9.b585cb9a.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.18d8e194.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d6673cae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="home"><header class="header" style="opacity:0;" data-v-64814c34><div class="header_container" data-v-64814c34><div data-v-64814c34><a href="/" class="header_title" data-v-64814c34>Leopold's Blog</a></div> <div class="appearance" data-v-64814c34><button type="button" class="switch" data-v-64814c34><span class="check" data-v-64814c34><span class="icon" style="display: block;" data-v-64814c34><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="sun" style="display:none;" data-v-64814c34><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z" data-v-64814c34></path> <path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z" data-v-64814c34></path> <path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z" data-v-64814c34></path> <path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z" data-v-64814c34></path> <path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z" data-v-64814c34></path> <path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z" data-v-64814c34></path> <path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z" data-v-64814c34></path> <path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z" data-v-64814c34></path> <path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z" data-v-64814c34></path></svg> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewBox="0 0 24 24" class="moon" style="display:;" data-v-64814c34><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z" data-v-64814c34></path></svg></span></span></button> <button type="button" class="switch mobile_list_btn" data-v-64814c34><span class="btn_top" data-v-64814c34></span> <span class="btn_middle" data-v-64814c34></span> <span class="btn_bottom" data-v-64814c34></span></button></div></div></header> <div id="background"><svg viewBox="0 0 1026 1024" xmlns="http://www.w3.org/2000/svg" class="pull_down"><path d="M857.088 224.256q28.672-28.672 69.12-28.672t69.12 28.672q29.696 28.672 29.696 68.608t-29.696 68.608l-382.976 380.928q-12.288 14.336-30.72 19.968t-38.912 4.608-40.448-8.704-34.304-22.016l-376.832-374.784q-29.696-28.672-29.696-68.608t29.696-68.608q14.336-14.336 32.256-21.504t36.864-7.168 37.376 7.168 32.768 21.504l313.344 309.248z"></path></svg></div> <div id="content_container"><div id="content"><!----> <div id="info" data-v-b2f70082><div id="sidebar" data-v-b2f70082><div class="sidebar_top card_border" style="min-height:1rem;" data-v-b2f70082><div class="tags_brand" data-v-b2f70082>本文大纲</div> <section class="article_sidebar" data-v-990ea420 data-v-b2f70082><ul data-v-990ea420><li class="level2" data-v-990ea420><a href="#配置ssh进行远程服务器快速连接" class="sidebar-link" data-v-990ea420>配置SSH进行远程服务器快速连接</a></li><li class="level2" data-v-990ea420><a href="#处理长时间未使用导致的远程连接断开" class="sidebar-link" data-v-990ea420>处理长时间未使用导致的远程连接断开</a></li><li class="level2" data-v-990ea420><a href="#单台设备多个git账号公钥的配置" class="sidebar-link" data-v-990ea420>单台设备多个git账号公钥的配置</a></li><li class="level2" data-v-990ea420><a href="#关于git的全局配置与多个git平台账号问题" class="sidebar-link" data-v-990ea420>关于git的全局配置与多个git平台账号问题</a></li><li class="level2" data-v-990ea420><a href="#同一项目向多个git平台推送" class="sidebar-link" data-v-990ea420>同一项目向多个git平台推送</a></li></ul></section></div> <div class="sidebar_bottom card_border" data-v-b2f70082><div class="avatar" style="background-image:url(/assets/imgs/avatar.jpg);" data-v-b2f70082></div> <div class="author" data-v-b2f70082>Leopold</div> <div class="summary" data-v-b2f70082><div data-v-b2f70082><p data-v-b2f70082>文章</p></div><div data-v-b2f70082><p data-v-b2f70082>分类</p></div><div data-v-b2f70082><p data-v-b2f70082>标签</p></div> <div data-v-b2f70082><p data-v-b2f70082>8</p></div><div data-v-b2f70082><p data-v-b2f70082>7</p></div><div data-v-b2f70082><p data-v-b2f70082>13</p></div></div> <div class="connection" data-v-b2f70082><div class="grid_icon" data-v-b2f70082><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon" data-v-b2f70082><path d="M1023.560892 524.587752c0 114.331752-32.549236 217.148443-97.647709 308.450075-65.047295 91.301632-149.132822 154.455339-252.205404 189.512299-11.975662 2.303012-20.778286 0.716493-26.305515-4.759558a27.584966 27.584966 0 0 1-8.342021-20.471218V853.150798c0-44.166653-11.566238-76.511177-34.647536-96.982394a446.272549 446.272549 0 0 0 68.32269-12.282731c20.16415-5.476051 41.044792-14.329852 62.590748-26.612583a187.311643 187.311643 0 0 0 53.992837-45.446104c14.432209-18.014672 26.203159-41.914819 35.312851-71.751618 9.109692-29.8368 13.664538-64.074912 13.664538-102.765514 0-55.118754-17.554069-102.049021-52.61103-140.739623 16.376974-41.454216 14.636921-87.872703-5.373695-139.357815-12.436265-4.094244-30.399759-1.535341-53.941659 7.523172a355.17563 355.17563 0 0 0-61.311297 30.041513l-25.333132 16.376974a462.137743 462.137743 0 0 0-127.945112-17.707604 462.137743 462.137743 0 0 0-127.945111 17.758782 589.571074 589.571074 0 0 0-28.301459-18.424096c-11.77095-7.31846-30.34858-16.069906-55.681713-26.305515-25.281954-10.235609-44.422543-13.306292-57.31941-9.212048-19.498835 51.433935-21.085354 97.852421-4.606024 139.306637-35.108139 38.690602-52.713386 85.620869-52.713386 140.739623 0 38.690602 4.606024 72.826357 13.715716 102.458445 9.109692 29.58091 20.778286 53.481057 34.954605 71.700441a180.658498 180.658498 0 0 0 53.634591 45.753172c21.545957 12.282731 42.477777 21.18771 62.641926 26.612583 20.215328 5.527229 42.989557 9.621472 68.32269 12.333909-17.758781 16.376974-28.659705 39.867697-32.651593 70.369811a129.941055 129.941055 0 0 1-29.990334 10.235609 184.087426 184.087426 0 0 1-37.974109 3.428929c-14.688099 0-29.171485-4.913092-43.654872-14.688099-14.432209-9.826185-26.766117-24.053681-37.001726-42.682489a109.162769 109.162769 0 0 0-32.293346-35.517563c-13.101579-9.109692-24.104859-14.585743-33.009839-16.376974l-13.306292-2.047122c-9.314404 0-15.762838 1.023561-19.345301 3.070683-3.582463 2.047122-4.606024 4.606024-3.326572 7.83024a37.769397 37.769397 0 0 0 5.987831 9.570295 49.182101 49.182101 0 0 0 8.700267 8.188487l4.606024 3.377751c9.826185 4.606024 19.447657 13.255114 29.017952 25.998447 9.570294 12.743333 16.581686 24.360749 20.982998 34.80107l6.653146 15.71166c5.783119 17.298179 15.558126 31.320963 29.376197 42.017174 13.766894 10.747389 28.659705 17.554069 44.627255 20.471218 15.96755 2.968327 31.423319 4.606024 46.316131 4.810736 14.841633 0.204712 27.22672-0.562958 37.001726-2.405368l15.302235-2.712436c0 17.298179 0.102356 37.564685 0.358247 60.799517l0.307068 36.848192c0 8.188487-2.86597 15.046345-8.700268 20.471218-5.731941 5.527229-14.636921 7.113748-26.612583 4.810736-103.072582-35.056961-187.158109-98.261846-252.205404-189.512299C32.549236 741.736195 0 638.919504 0 524.587752c0-95.191163 22.876586-182.910331 68.629758-263.31104a516.028224 516.028224 0 0 1 186.288082-190.894106A491.309228 491.309228 0 0 1 511.780446 0.012795a491.309228 491.309228 0 0 1 256.913784 70.369811 516.028224 516.028224 0 0 1 186.236905 190.894106C1000.684306 341.626242 1023.560892 429.447767 1023.560892 524.587752z" data-v-b2f70082></path></svg></div><div data-v-b2f70082><span data-v-b2f70082>github.com/SayNop</span></div> <div class="grid_icon" data-v-b2f70082><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon" data-v-b2f70082><path d="M512 1024C229.222 1024 0 794.778 0 512S229.222 0 512 0s512 229.222 512 512-229.222 512-512 512z m259.149-568.883h-290.74a25.293 25.293 0 0 0-25.292 25.293l-0.026 63.206c0 13.952 11.315 25.293 25.267 25.293h177.024c13.978 0 25.293 11.315 25.293 25.267v12.646a75.853 75.853 0 0 1-75.853 75.853h-240.23a25.293 25.293 0 0 1-25.267-25.293V417.203a75.853 75.853 0 0 1 75.827-75.853h353.946a25.293 25.293 0 0 0 25.267-25.292l0.077-63.207a25.293 25.293 0 0 0-25.268-25.293H417.152a189.62 189.62 0 0 0-189.62 189.645V771.15c0 13.977 11.316 25.293 25.294 25.293h372.94a170.65 170.65 0 0 0 170.65-170.65V480.384a25.293 25.293 0 0 0-25.293-25.267z" data-v-b2f70082></path></svg></div><div data-v-b2f70082><span data-v-b2f70082>gitee.com/WhenTimeGoesBy</span></div> <div class="grid_icon" data-v-b2f70082><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon" data-v-b2f70082><path d="M874.666667 181.333333H149.333333c-40.533333 0-74.666667 34.133333-74.666666 74.666667v512c0 40.533333 34.133333 74.666667 74.666666 74.666667h725.333334c40.533333 0 74.666667-34.133333 74.666666-74.666667V256c0-40.533333-34.133333-74.666667-74.666666-74.666667z m-725.333334 64h725.333334c6.4 0 10.666667 4.266667 10.666666 10.666667v25.6L512 516.266667l-373.333333-234.666667V256c0-6.4 4.266667-10.666667 10.666666-10.666667z m725.333334 533.333334H149.333333c-6.4 0-10.666667-4.266667-10.666666-10.666667V356.266667l356.266666 224c4.266667 4.266667 10.666667 4.266667 17.066667 4.266666s12.8-2.133333 17.066667-4.266666l356.266666-224V768c0 6.4-4.266667 10.666667-10.666666 10.666667z" data-v-b2f70082></path></svg></div><div data-v-b2f70082><span data-v-b2f70082>fur999immer@gmail.com</span></div></div></div></div></div> <div id="article_container"><div class="card_border content_container" data-v-0a8dea70><div class="frontmatter_info" data-v-0a8dea70><h1 class="frontmatter-title" data-v-0a8dea70>GIT配置同设备多账号管理与SSH配置</h1> <div class="frontmatter-date" data-v-0a8dea70>2023-03-06</div> <div class="card_tag frontmatter_tags" data-v-0a8dea70><span class="icon" data-v-0a8dea70><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" data-v-0a8dea70><path d="M896 682.666667a42.666667 42.666667 0 0 0-42.666667-42.666667h-85.333333v-85.333333a85.333333 85.333333 0 0 0-85.333333-85.333334h-128V384h85.333333a42.666667 42.666667 0 0 0 42.666667-42.666667V170.666667a42.666667 42.666667 0 0 0-42.666667-42.666667H384a42.666667 42.666667 0 0 0-42.666667 42.666667v170.666666a42.666667 42.666667 0 0 0 42.666667 42.666667h85.333333v85.333333H341.333333a85.333333 85.333333 0 0 0-85.333333 85.333334v85.333333H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666667v170.666666a42.666667 42.666667 0 0 0 42.666667 42.666667h256a42.666667 42.666667 0 0 0 42.666666-42.666667v-170.666666a42.666667 42.666667 0 0 0-42.666666-42.666667H341.333333v-85.333333h341.333334v85.333333h-85.333334a42.666667 42.666667 0 0 0-42.666666 42.666667v170.666666a42.666667 42.666667 0 0 0 42.666666 42.666667h256a42.666667 42.666667 0 0 0 42.666667-42.666667z"></path></svg></span> <span class="article_category" data-v-0a8dea70>git</span> <span class="icon" style="margin-right: 5px" data-v-0a8dea70><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" data-v-0a8dea70><path d="M985.6 473.6 985.6 473.6l-256 256-256 256 0 0C454.4 1011.2 422.4 1024 384 1024c-38.4 0-70.4-12.8-89.6-38.4l0 0-256-256 0 0C12.8 710.4 0 678.4 0 640c0-38.4 12.8-70.4 38.4-89.6l0 0 256-256 256-256 0 0C569.6 12.8 601.6 0 640 0l256 0c70.4 0 128 57.6 128 128l0 256C1024 422.4 1011.2 454.4 985.6 473.6zM768 128c-70.4 0-128 57.6-128 128 0 70.4 57.6 128 128 128 70.4 0 128-57.6 128-128C896 185.6 838.4 128 768 128z"></path></svg></span> <span class="article_tag" data-v-0a8dea70>git</span><span class="article_tag" data-v-0a8dea70>ssh</span></div></div> <div class="content__default" data-v-0a8dea70><h2 id="配置ssh进行远程服务器快速连接"><a href="#配置ssh进行远程服务器快速连接" class="header-anchor">#</a> 配置SSH进行远程服务器快速连接</h2> <p>修改<code>~/.ssh/config</code>文件进行配置</p> <div class="language-shell macos line-numbers-mode"><pre class="language-shell"><code>Host server01  <span class="token comment"># 配置服务器别名</span>
  HostName xxx.xxx.xxx.xxx  <span class="token comment"># 服务器ip</span>
  User root  <span class="token comment"># 登录用户名</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>配置完成后，可使用别名进行连接</p> <div class="language-bash macos line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 原本的连接，需要用户名和真实ip</span>
<span class="token function">ssh</span> root@xxx.xxx.xxx.xxx

<span class="token comment"># 配置完成后可使用别名直接连接</span>
<span class="token function">ssh</span> server01
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="处理长时间未使用导致的远程连接断开"><a href="#处理长时间未使用导致的远程连接断开" class="header-anchor">#</a> 处理长时间未使用导致的远程连接断开</h2> <p>配置文件中增加轮询防止ssh自动断开</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Host *
  ServerAliveCountMax <span class="token number">5</span>  <span class="token comment"># 断开时重试连接的次数</span>
  ServerAliveInterval <span class="token number">5</span>  <span class="token comment"># 每隔5秒自动发送一个空的请求以保持连接</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="单台设备多个git账号公钥的配置"><a href="#单台设备多个git账号公钥的配置" class="header-anchor">#</a> 单台设备多个git账号公钥的配置</h2> <ul><li><p>控制台键入<code>ssh-keygen -t rsa -C &quot;邮箱&quot;</code>生成公钥（单个邮箱单种加密只可生成一个公钥匙。因不指定文件名会进行覆盖）</p></li> <li><p><code>cat ~/.ssh/id_rsa.pub</code>查看公钥，将其复制进git的ssh公钥中（例如gitlab，github等）</p></li> <li><p>git平台保存公钥时可将标题指明为设备，防止单个邮箱在多个设备上生成不同的公钥，产生混淆</p></li></ul> <p>在生成公钥时一般使用邮箱进行生成。如要区分公司账号与自己账号，自己账号尽量使用同一个邮箱，后续会有说明。</p> <p><strong>注意：</strong>
同一个邮箱使用同一种加密算法生成的公钥相同。在生成公钥时，尽量每个站点生成名称不同的公钥文件。</p> <div class="language-shell macos line-numbers-mode"><pre class="language-shell"><code>Host gitlab.com
    HostName gitlab.com
    User xxx  <span class="token comment"># gitlab的用户名</span>
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/id_rsa_gitlab  <span class="token comment"># gitlab的公钥</span>

Host github.com
    HostName github.com
    User xxx  <span class="token comment"># github的用户名</span>
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/id_rsa  <span class="token comment"># github的公钥</span>

Host gitee.com
    HostName gitee.com
    User xxx  <span class="token comment"># gitee的用户名</span>
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/id_rsa  <span class="token comment"># gitee的公钥</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>配置完成后进行测试</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ssh</span> <span class="token parameter variable">-T</span> git@gitlab.com  <span class="token comment"># 测试gitlab的公钥配置是否成功</span>
<span class="token function">ssh</span> <span class="token parameter variable">-T</span> git@github.com  <span class="token comment"># 测试github的公钥配置是否成功</span>
<span class="token function">ssh</span> <span class="token parameter variable">-T</span> git@gitee.com  <span class="token comment"># 测试gitee的公钥配置是否成功</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><em>说明：多个git平台可使用相同的公钥文件。以上述github与gitee为例，由于是同一个邮箱，使用相同的公钥</em></p> <h2 id="关于git的全局配置与多个git平台账号问题"><a href="#关于git的全局配置与多个git平台账号问题" class="header-anchor">#</a> 关于git的全局配置与多个git平台账号问题</h2> <p>查看git全局配置<code>git config --global --edit</code></p> <div class="language-systemd macos line-numbers-mode"><pre class="language-systemd"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">user</span><span class="token punctuation">]</span></span>
      name <span class="token punctuation">=</span> <span class="token value attr-value">xxx</span>
      email <span class="token punctuation">=</span> <span class="token value attr-value">xxx@xx.com</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在初次使用时，可能如上配置了全局的用户名与邮箱。该配置会让该设备所进行的所有推送都将使用该用户名与邮箱。</p> <p><strong>注意：</strong></p> <ul><li><p>在未设置全局的情况下，终端中使用<code>git push</code>将使用设备系统设置中的用户名与邮箱进行推送。</p></li> <li><p><strong>邮箱</strong>是确定推送git平台账号的标识。如果邮箱不匹配git平台账号，则git平台会显示为其他用户推送，不会正常统计git平台账号的贡献次数。</p></li> <li><p>修改指定项目的推送用户名和邮箱。通过bash执行<code>git config --local user.name &quot;xxx&quot;</code>与<code>git config --local user.email &quot;xxx@xx.com&quot;</code></p></li></ul> <p>或编辑项目的<code>.git/config</code>添加（通过bash命令添加即是在config中加入下列对应参数）</p> <div class="language-systemd macos line-numbers-mode"><pre class="language-systemd"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">user</span><span class="token punctuation">]</span></span>
        name <span class="token punctuation">=</span> <span class="token value attr-value">xxx</span>
        email <span class="token punctuation">=</span> <span class="token value attr-value">xxx@xx.com</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>设置项目推送的<strong>邮箱</strong>与git平台账号一致，以保证git平台正常统计。即使用户名不一致，使用邮箱一致即可（保证生成公钥邮箱、git登录邮箱、推送邮箱三者一致）。</p> <h2 id="同一项目向多个git平台推送"><a href="#同一项目向多个git平台推送" class="header-anchor">#</a> 同一项目向多个git平台推送</h2> <ul><li><p>执行一次<code>git push</code>同时推送多个平台</p> <ul><li><p>选择一个仓库进行clone</p></li> <li><p>在另一个平台新建仓库并导入上一个平台中创建的仓库</p></li> <li><p>修改<code>.git/config</code></p> <div class="language-systemd macos line-numbers-mode"><pre class="language-systemd"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">remote &quot;origin&quot;</span><span class="token punctuation">]</span></span>
        url <span class="token punctuation">=</span> <span class="token value attr-value">git@github.com:xxx/xxxxx.git</span>
        # 添加需要额外推送的仓库git链接
        url <span class="token punctuation">=</span> <span class="token value attr-value">git@gitee.com:xxx/xxxxx.git</span>
        fetch <span class="token punctuation">=</span> <span class="token value attr-value">+refs/heads/*:refs/remotes/origin/*</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>注意：以此方式进行推送，多个git平台在推送时将使用统一的用户名与邮箱。如果git平台的<strong>邮箱不一致</strong>，则无法使多个git平台同时正确的统计账号贡献信息</p></li></ul></li> <li><p>配置多个remote进行多次推送保证多个git平台都能正常统计账号贡献信息</p> <ul><li><p>修改<code>.git/config</code>，删除<code>[remote &quot;origin&quot;]</code>，新增多个git平台的remote配置</p> <div class="language-systemd macos line-numbers-mode"><pre class="language-systemd"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">remote &quot;github&quot;</span><span class="token punctuation">]</span></span>
    url <span class="token punctuation">=</span> <span class="token value attr-value">git@github.com:xxx/xxxxx.git</span>
    fetch <span class="token punctuation">=</span> <span class="token value attr-value">+refs/heads/*:refs/remotes/origin/*</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">remote &quot;gitee&quot;</span><span class="token punctuation">]</span></span>
    url <span class="token punctuation">=</span> <span class="token value attr-value">git@gitee.com:xxx/xxxxx.git</span>
    fetch <span class="token punctuation">=</span> <span class="token value attr-value">+refs/heads/*:refs/remotes/origin/*</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>bash中使用<code>git remote</code>测试是否配置成功</p></li> <li><p>在推送前修改<code>.git/config</code>中的user信息</p> <div class="language-systemd macos line-numbers-mode"><pre class="language-systemd"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">user</span><span class="token punctuation">]</span></span>
        name <span class="token punctuation">=</span> <span class="token value attr-value">xxx</span>
        email <span class="token punctuation">=</span> <span class="token value attr-value">xxx@xx.com</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>推送时根据user信息对两个仓库分别进行修改后的推送</p> <div class="language-bash macos line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 推送github</span>
<span class="token function">git</span> push github matser
<span class="token comment"># 推送gitee</span>
<span class="token function">git</span> push gitee master
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul></li> <li><p>修改全局配置实现对用户名与密码的自动选择（需要git版本2.36.0）</p> <ul><li><p>通过if对仓库地址进行判断从而读取不同的配置文件</p> <div class="language-systemd macos line-numbers-mode"><pre class="language-systemd"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">includeIf &quot;hasconfig:remote.*.url:git@github.com*/**&quot;</span><span class="token punctuation">]</span></span>
      path <span class="token punctuation">=</span> <span class="token value attr-value">~/.gitconfig-gitlab</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">includeIf &quot;hasconfig:remote.*.url:git@github.com*/**&quot;</span><span class="token punctuation">]</span></span>
      path <span class="token punctuation">=</span> <span class="token value attr-value">~/.gitconfig-github</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">includeIf &quot;hasconfig:remote.*.url:git@gitee.com*/**&quot;</span><span class="token punctuation">]</span></span>
      path <span class="token punctuation">=</span> <span class="token value attr-value">~/.gitconfig-gitee</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li></ul></div> <script src="https://giscus.app/client.js" data-repo="SayNop/SayNop.github.io" data-repo-id="R_kgDOIlAnJQ" data-category="Announcements" data-category-id="DIC_kwDOIlAnJc4CYVx8" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="light_protanopia" data-lang="zh-CN" crossorigin="anonymous" async="async" data-v-0a8dea70></script></div> <footer class="page_footer" data-v-1fbd125a><div class="footer_middle card_border" data-v-1fbd125a><span data-v-1fbd125a>Released under the MIT License. <br data-v-1fbd125a></span><span data-v-1fbd125a>Copyright © 2023-present Leopold <br data-v-1fbd125a></span></div></footer></div></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.dce54de5.js" defer></script><script src="/assets/js/3.640944bc.js" defer></script><script src="/assets/js/6.80f121fe.js" defer></script>
  </body>
</html>
