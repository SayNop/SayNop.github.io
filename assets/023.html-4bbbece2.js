import{_ as i,r as l,o as s,c as o,a as t,b as e,d as n,e as r}from"./app-0bd30adb.js";const h="/assets/imgs/023/01.png",c="/assets/imgs/023/02.png",p="/assets/imgs/023/03.png",d="/assets/imgs/023/04.png",m={},u=r('<h2 id="证书安装" tabindex="-1"><a class="header-anchor" href="#证书安装" aria-hidden="true">#</a> 证书安装</h2><h3 id="电脑安装" tabindex="-1"><a class="header-anchor" href="#电脑安装" aria-hidden="true">#</a> 电脑安装</h3><ul><li><p>macOS：<em>Menu Bar(菜单栏) -&gt; Help -&gt; SSL Proxying -&gt; Install Charles Root Certificate</em></p></li><li><p>windows：同上。在随后的证书对话框中进入证书安装向导，到达下图中证书存储时，通过自定位存储位置（浏览按钮），存储到 “受信任的根证书颁发机构”</p><p><img src="'+h+'" alt=""></p></li></ul><p>本文后续以 macOS 4.6.2 版本为主，进行介绍</p><h3 id="手机安装" tabindex="-1"><a class="header-anchor" href="#手机安装" aria-hidden="true">#</a> 手机安装</h3>',5),g=t("a",{href:"chls.pro/ssl"},"chls.pro/ssl",-1),_={href:"http://ssl.charles",target:"_blank",rel:"noopener noreferrer"},x=r('<p>下载证书文件并安装完成后再关闭系统设置内的代理，使用 postern 内的 socks5</p><p>iphone安装后需要额外设置对证书信任</p><h3 id="证书失效" tabindex="-1"><a class="header-anchor" href="#证书失效" aria-hidden="true">#</a> 证书失效</h3><p>chls 证书的时效性只有一年，chls 应用的证书时效需要手动进行重置</p><p>使用chls内的重置功能并重新执行安装流程。以下为macOS重置证书的位置</p><p><em>Menu Bar -&gt; Help -&gt; SSL Proxying -&gt; Reset Charles Root Certificate...</em></p><h2 id="常用配置项" tabindex="-1"><a class="header-anchor" href="#常用配置项" aria-hidden="true">#</a> 常用配置项</h2><ul><li>启用 http 代理：<em>Menu Bar -&gt; Proxy -&gt; Proxy Settings...</em> 的 Proxies 标签页，勾选 <em>Enable transparent HTTP proxying</em></li><li>停用缓存： chrome devtools 的 network 标签页中有 disable cache(停用缓存)。在 chls 的 <em>Menu Bar -&gt; tools -&gt; No Caching...</em> 也有相似的功能</li><li>SSL代理： <em>Menu Bar -&gt; Proxy -&gt; SSL Proxy Settings...</em> 的 SSL Proxy 标签页增加 Host <code>*</code> Port <code>443</code> 及 Host <code>*</code> Port <code>80</code></li></ul><h2 id="工具栏简介" tabindex="-1"><a class="header-anchor" href="#工具栏简介" aria-hidden="true">#</a> 工具栏简介</h2><p>共有如下几个按钮。hover 会提示按钮功能</p><p><img src="'+c+'" alt=""></p><p>这些按钮的功能分别是</p><ul><li>清除记录窗口内的请求记录</li><li>开启与暂停记录</li><li>是否代理ssl请求</li><li>弱网</li><li>断点</li><li>发送请求</li><li>请求重发</li><li>请求校验</li><li>常用工具</li><li>配置项</li></ul><h2 id="structure视图" tabindex="-1"><a class="header-anchor" href="#structure视图" aria-hidden="true">#</a> Structure视图</h2><blockquote><p>将请求按照域名归类</p></blockquote><p>此时，在非具体请求的层级下，信息窗口查看到的内容不同（右侧信息窗口中的标签页）</p><ul><li>域名层级：Overview、Summary、Chat 三个标签页 <ul><li>Overview：该域名下的请求信息，请求数量，时间，请求流量等</li><li>Summary：该域名下的请求地址列表 与 列表结尾的统计</li><li>Chat：该域名下的请求瀑布图</li></ul></li></ul><p><strong>常用功能：域名框底部存在filter，用于对域名进行过滤</strong></p><p><img src="'+p+'" alt=""></p><h2 id="弱网" tabindex="-1"><a class="header-anchor" href="#弱网" aria-hidden="true">#</a> 弱网</h2><p>与<em>Chrome DevTools -&gt;Network -&gt; No Trottling（Preserve log 同级，节流功能）</em> 类似的模拟弱网环境功能</p><ul><li><p>启动弱网功能 <em>Menu Bar -&gt; Proxy -&gt; Start Throttling</em> 或 工具栏中的弱网按钮（龟壳）</p></li><li><p>设置弱网 <em>Menu Bar -&gt; Proxy -&gt; Throttle Settings...</em></p><ul><li><em>Only for selected hosts</em> 设置弱网生效域名，不设置默认开启弱网后对所有域名都生效</li><li><em>Throttle preset</em> 选择内置的弱网配置，如 3G/4G 等</li><li>也可自行配置上下行速率 MTU 等</li></ul></li></ul><h2 id="接口修改与重发" tabindex="-1"><a class="header-anchor" href="#接口修改与重发" aria-hidden="true">#</a> 接口修改与重发</h2><p>可以对指定请求进行修改后重新发送</p><ul><li>不修改直接重发 <em>目标请求右键 -&gt; Repeat</em></li><li>修改请求内容并重发 <em>目标请求右键 -&gt; Compose</em></li></ul><h2 id="断点" tabindex="-1"><a class="header-anchor" href="#断点" aria-hidden="true">#</a> 断点</h2><p>通过对指定请求增加断点，可对该请求进行修改并发送</p><ul><li><p>启用断点功能 <em>Menu Bar -&gt; Proxy -&gt; Enable Breakpoints</em> 或 工具栏中的断点按钮</p></li><li><p>对目标请求进行断点 <em>目标请求右键 -&gt; Breakpoints</em></p><p><img src="'+d+'" alt=""></p></li><li><p>Before request：此时再次请求断点接口，会触发与 Session 同级的 Breakpoints 标签页。目标请求在该标签页中断下，可对请求内容（如请求api，方法，请求头，请求体等）进行修改。之后通过 <em>Execute</em> 按钮继续发送该请求，或 <em>Abort</em> 按钮终止该请求对发送</p></li><li><p>After reponse：在获取该请求的响应时，同样也会触发断点，可以对响应内容进行修改。之后通过 <em>Execute</em> 按钮继续发送该请求，或 <em>Abort</em> 按钮终止该请求对发送</p></li></ul><h2 id="响应内容替换" tabindex="-1"><a class="header-anchor" href="#响应内容替换" aria-hidden="true">#</a> 响应内容替换</h2><blockquote><p>可配置响应替换规则，当请求符合规则时，charles会按照配置，将该请求的响应内容替换为本地资源文件</p></blockquote><p>在逆向加密 js 时，在 需要对指定代码插桩；加密js请求的响应会变化；ast去混淆代码测试 等情况下，常使用此功能</p><p>若请求地址会动态变化，如时间戳等，charles 可配置模糊匹配的方法，相比 chrome 的 overrides 更加灵活、方便</p><ul><li>配置替换规则位置： <em>Menu Bar -&gt; Tools -&gt; Map Local...</em> 或 <em>目标请求右键 -&gt; Map Local...</em></li><li>使用 <em>Add</em> 新增替换规则</li><li>配置替换的 协议、域名、端口、api、query参数</li><li>选择本地资源路径，作为响应内容进行替换</li></ul>',33);function f(b,S){const a=l("ExternalLinkIcon");return s(),o("div",null,[u,t("p",null,[e("先使用系统设置内的http代理访问 "),g,e(" 或 "),t("a",_,[e("http://ssl.charles"),n(a)])]),x])}const k=i(m,[["render",f],["__file","023.html.vue"]]);export{k as default};
