import{_ as s,o as n,c as e,e as a}from"./app-f1e6e653.js";const i={},t=a(`<h2 id="配置ssh进行远程服务器快速连接" tabindex="-1"><a class="header-anchor" href="#配置ssh进行远程服务器快速连接" aria-hidden="true">#</a> 配置SSH进行远程服务器快速连接</h2><p>修改<code>~/.ssh/config</code>文件进行配置</p><div class="macos language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Host server01  <span class="token comment"># 配置服务器别名</span>
    HostName xxx.xxx.xxx.xxx  <span class="token comment"># 服务器ip</span>
    User root  <span class="token comment"># 登录用户名</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置完成后，可使用别名进行连接</p><div class="macos language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 原本的连接，需要用户名和真实ip</span>
<span class="token function">ssh</span> root@xxx.xxx.xxx.xxx

<span class="token comment"># 配置完成后可使用别名直接连接</span>
<span class="token function">ssh</span> server01
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="处理长时间未使用导致的远程连接断开" tabindex="-1"><a class="header-anchor" href="#处理长时间未使用导致的远程连接断开" aria-hidden="true">#</a> 处理长时间未使用导致的远程连接断开</h2><p>配置文件中增加轮询防止ssh自动断开</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Host *
    ServerAliveCountMax <span class="token number">5</span>  <span class="token comment"># 断开时重试连接的次数</span>
    ServerAliveInterval <span class="token number">5</span>  <span class="token comment"># 每隔5秒自动发送一个空的请求以保持连接</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="单台设备多个git账号公钥的配置" tabindex="-1"><a class="header-anchor" href="#单台设备多个git账号公钥的配置" aria-hidden="true">#</a> 单台设备多个git账号公钥的配置</h2><ul><li><p>控制台键入<code>ssh-keygen -t rsa -C &quot;邮箱&quot;</code>生成公钥（单个邮箱单种加密只可生成一个公钥匙。因不指定文件名会进行覆盖）</p></li><li><p><code>cat ~/.ssh/id_rsa.pub</code>查看公钥，将其复制进git的ssh公钥中（例如gitlab，github等）</p></li><li><p>git平台保存公钥时可将标题指明为设备，防止单个邮箱在多个设备上生成不同的公钥，产生混淆</p></li></ul><p>在生成公钥时一般使用邮箱进行生成。如要区分公司账号与自己账号，自己账号尽量使用同一个邮箱，后续会有说明</p><p><strong>注意：</strong> 同一个邮箱使用同一种加密算法生成的公钥相同。在生成公钥时，尽量每个站点生成名称不同的公钥文件</p><div class="macos language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Host gitlab.com
    HostName gitlab.com
    User <span class="token function">git</span>
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/id_rsa_gitlab  <span class="token comment"># gitlab的公钥</span>

Host github.com
    HostName github.com
    User <span class="token function">git</span>
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/id_rsa  <span class="token comment"># github的公钥</span>

Host gitee.com
    HostName gitee.com
    User <span class="token function">git</span>
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/id_rsa  <span class="token comment"># gitee的公钥</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置完成后进行测试</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ssh</span> <span class="token parameter variable">-T</span> git@gitlab.com  <span class="token comment"># 测试gitlab的公钥配置是否成功</span>
<span class="token function">ssh</span> <span class="token parameter variable">-T</span> git@github.com  <span class="token comment"># 测试github的公钥配置是否成功</span>
<span class="token function">ssh</span> <span class="token parameter variable">-T</span> git@gitee.com  <span class="token comment"># 测试gitee的公钥配置是否成功</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>说明：多个git平台可使用相同的公钥文件。以上述github与gitee为例，由于是同一个邮箱，使用相同的公钥</em></p><h2 id="查看git配置与多个git平台账号问题" tabindex="-1"><a class="header-anchor" href="#查看git配置与多个git平台账号问题" aria-hidden="true">#</a> 查看git配置与多个git平台账号问题</h2><ul><li><p>查看git系统配置(非必须) <code>git config --system --list</code></p></li><li><p>查看git全局配置 <code>git config --global --edit</code>或<code>vim ~/.gitconfig</code></p></li></ul><div class="macos language-systemd line-numbers-mode" data-ext="systemd"><pre class="language-systemd"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">user</span><span class="token punctuation">]</span></span>
        name <span class="token punctuation">=</span> <span class="token value attr-value">xxx</span>
        email <span class="token punctuation">=</span> <span class="token value attr-value">xxx@xx.com</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查看git项目配置 <code>git config --local --list</code>或<code>vim .git/config</code></li></ul><p>在初次git使用时，可能配置了全局的用户名与邮箱（global配置）。该配置会让该设备所进行的所有推送都将使用该用户名与邮箱。</p><p><strong>注意：</strong></p><ul><li><p>在未设置全局与项目的情况下，终端中使用<code>git push</code>将使用系统配置，若无系统配置，将使用设备系统设置中的用户名与邮箱进行推送</p></li><li><p><strong>邮箱</strong> 是确定 <strong>提交</strong> git平台账号的标识。如果邮箱不匹配git平台账号，则git平台会显示为其他用户推送，不会正常统计git平台账号的贡献次数。commit信息异常请检查<strong>执行commint操作的邮箱</strong>是否正确，与<strong>执行push操作的邮箱</strong>无关</p></li><li><p>修改指定项目的推送用户名和邮箱。通过bash执行<code>git config --local user.name &quot;xxx&quot; </code>与<code>git config --local user.email &quot;xxx@xx.com&quot;</code></p></li></ul><p>或编辑项目的<code>.git/config</code>添加（通过bash命令添加即是在config中加入下列对应参数）</p><div class="macos language-systemd line-numbers-mode" data-ext="systemd"><pre class="language-systemd"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">user</span><span class="token punctuation">]</span></span>
        name <span class="token punctuation">=</span> <span class="token value attr-value">xxx</span>
        email <span class="token punctuation">=</span> <span class="token value attr-value">xxx@xx.com</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置项目推送的 <strong>邮箱</strong> 与git平台账号一致，以保证git平台正常统计。即使用户名不一致，使用邮箱一致即可（保证生成公钥邮箱、git登录邮箱、推送邮箱三者一致）</p><h2 id="同一项目向多个git平台推送" tabindex="-1"><a class="header-anchor" href="#同一项目向多个git平台推送" aria-hidden="true">#</a> 同一项目向多个git平台推送</h2><ul><li><p>执行一次<code>git push</code>同时推送多个平台</p><ul><li><p>确保本地已存在该项目代码</p><ul><li><p>本地不存在时，选择一个仓库进行clone</p></li><li><p>本地已存在时，可执行一次<code>git push</code>保证已有平台上的代码为最新代码</p></li></ul></li><li><p>在另一个平台新建仓库（不需要仓库名一致）</p></li><li><p>修改<code>.git/config</code></p></li></ul><div class="macos language-systemd line-numbers-mode" data-ext="systemd"><pre class="language-systemd"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">remote &quot;origin&quot;</span><span class="token punctuation">]</span></span>
        url <span class="token punctuation">=</span> <span class="token value attr-value">git@github.com:xxx/xxxxx.git</span>
        # 添加需要额外推送的仓库git链接
        url <span class="token punctuation">=</span> <span class="token value attr-value">git@gitee.com:xxx/xxxxx.git</span>
        fetch <span class="token punctuation">=</span> <span class="token value attr-value">+refs/heads/*:refs/remotes/origin/*</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>执行<code>git push</code>将代码推送到新平台</p></li><li><p>注意：以此方式进行推送，多个git平台在推送时将使用统一的用户名与邮箱。如果git平台的<strong>邮箱不一致</strong>，则无法使多个git平台同时正确的统计账号贡献信息</p></li></ul></li><li><p>配置多个remote进行多次推送保证多个git平台都能正常统计账号贡献信息</p><ul><li>修改<code>.git/config</code>，删除<code>[remote &quot;origin&quot;]</code>，新增多个git平台的remote配置</li></ul><div class="macos language-systemd line-numbers-mode" data-ext="systemd"><pre class="language-systemd"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">remote &quot;github&quot;</span><span class="token punctuation">]</span></span>
    url <span class="token punctuation">=</span> <span class="token value attr-value">git@github.com:xxx/xxxxx.git</span>
    fetch <span class="token punctuation">=</span> <span class="token value attr-value">+refs/heads/*:refs/remotes/origin/*</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">remote &quot;gitee&quot;</span><span class="token punctuation">]</span></span>
    url <span class="token punctuation">=</span> <span class="token value attr-value">git@gitee.com:xxx/xxxxx.git</span>
    fetch <span class="token punctuation">=</span> <span class="token value attr-value">+refs/heads/*:refs/remotes/origin/*</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>bash中使用<code>git remote </code>测试是否配置成功</p></li><li><p>在推送前修改<code>.git/config</code>中的user信息</p></li></ul><div class="macos language-systemd line-numbers-mode" data-ext="systemd"><pre class="language-systemd"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">user</span><span class="token punctuation">]</span></span>
        name <span class="token punctuation">=</span> <span class="token value attr-value">xxx</span>
        email <span class="token punctuation">=</span> <span class="token value attr-value">xxx@xx.com</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>推送时根据user信息对两个仓库分别进行修改后的推送</li></ul><div class="macos language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 推送github</span>
<span class="token function">git</span> push github matser
<span class="token comment"># 推送gitee</span>
<span class="token function">git</span> push gitee master
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>修改全局配置实现对用户名与密码的自动选择（需要git版本2.36.0）</p><ul><li>通过if对仓库地址进行判断从而读取不同的配置文件</li></ul><div class="macos language-systemd line-numbers-mode" data-ext="systemd"><pre class="language-systemd"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">includeIf &quot;hasconfig:remote.*.url:git@gitlab.com*/**&quot;</span><span class="token punctuation">]</span></span>
      path <span class="token punctuation">=</span> <span class="token value attr-value">~/.gitconfig-gitlab</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">includeIf &quot;hasconfig:remote.*.url:git@github.com*/**&quot;</span><span class="token punctuation">]</span></span>
      path <span class="token punctuation">=</span> <span class="token value attr-value">~/.gitconfig-github</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">includeIf &quot;hasconfig:remote.*.url:git@gitee.com*/**&quot;</span><span class="token punctuation">]</span></span>
      path <span class="token punctuation">=</span> <span class="token value attr-value">~/.gitconfig-gitee</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul>`,28),l=[t];function c(o,d){return n(),e("div",null,l)}const u=s(i,[["render",c],["__file","002.html.vue"]]);export{u as default};
